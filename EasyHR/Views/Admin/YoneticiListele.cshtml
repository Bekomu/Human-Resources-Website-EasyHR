@{
    ViewData["Title"] = "Yönetici Listesi";
}

@model PersonelListeleViewModel
<h1 align="center" class="m-3">@ViewData["Title"]</h1>

@if (ViewBag.mesaj != null)
{
    <div class="alert alert-success">@ViewBag.mesaj</div>
}


<div class="row m-3 m-auto" style="max-width:1100px;">
    <div class="col-12">
        <div class="card card-primary card-outline">
            <div class="card-header">
                <h3 class="card-title">Liste</h3>
            </div>

            <div class="card-body">
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr align="center">
                            <th>Yönetici Ad Soyad</th>
                            <th>Şirketi</th>
                            <th>Yönetici Mail Adresi</th>
                            <th>Yönetici Telefon</th>
                            <th>İşlem</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var yonetici in Model.Personeller)
                        {
                            <tr data-widget="expandable-table" aria-expanded="false" align="center">
                                <td>@yonetici.Ad @yonetici.Soyad</td>
                                <td>@yonetici.Sirket.SirketAdi</td>
                                <td>@yonetici.UserName</td>
                                <td>@yonetici.Telefon</td>
                                <td><a onclick="SilmeOnayi(@yonetici.Id)" class="btn btn-sm btn-danger">Üyeliği İptal Et</a></td>
                            </tr>
                            <tr class="expandable-body">
                                <td colspan="5">
                                    <div class="row">

                                        <div class="col-sm-2">
                                            <img style="max-width:120px;" src="~/personel/fotolar/@yonetici.FotografAdi" alt="@yonetici.Ad + @yonetici.Soyad" />
                                        </div>

                                        <div class="col-sm-10">
                                            <p class="mx-3">
                                                Adres Bilgileri : <br /><br /> @yonetici.Adres
                                            </p>
                                        </div>

                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

        </div>
    </div>
</div>


<style>
    @@media only screen and (max-width: 794px) {

        #table {
            overflow-x: auto;
        }
    }
</style>

<script>

    @*function SilmeOnayi(*****) {

        Swal.fire({
            title: 'Emin misiniz?',
            text: ` ****** iptal edilecek, onaylıyor musunuz ?`,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Evet, *****!',
            cancelButtonText: 'İptal'
        }).then((result) => {
            if (result.isConfirmed) {

                $.ajax({
                    type: "post",
                    dataType: "html",
                    data: { *****: ****** },
                    url: '@Url.Action("******", "******")',
                    success: function () {
                        Swal.fire({
                            timer: 5000,
                            title: '',
                            text: '*******, sayfaya yönlendiriliyorsunuz.',
                            icon: 'success',
                        })
                        window.location = '/controller/action';
                    },
                    error: function () {

                    }
                });
            }
        });
    }*@

</script>